<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dreamtale (Prototype)</title>
  <link rel="stylesheet" href="style.css?v=11" />
</head>
<body>

  <!-- Title Screen -->
  <div id="titleScreen" class="overlay show">
    <div class="panel">
      <h1 class="logo">Dreamtale</h1>
      <p class="subtitle">Prototype — tap-to-move RPG</p>
      <div class="menu">
        <button id="btnStart" class="btn primary">▶ Inizia</button>
        <button id="btnOptions" class="btn">⚙️ Opzioni</button>
        <button id="btnReset" class="btn danger">🗑 Reset Salvataggio</button>
      </div>
      <div id="optionsBox" class="options hidden">
        <label><input type="checkbox" id="optPathHighlight"> Evidenzia percorso (debug)</label>
      </div>
    </div>
  </div>

  <!-- HUD in alto -->
  <div id="hudNostale">
    <div class="charbox">
      <div class="portrait"></div>
      <div class="bars">
        <div class="bar hp"><span id="hptext">100/100</span><div id="hpfill"></div></div>
        <div class="bar mp"><span id="mptext">100/100</span><div id="mpfill"></div></div>
        <div class="info">
          <span>LV <strong id="lvl">1</strong></span>
          <span>🪙 <strong id="coins">0</strong></span>
          <span>🍵 <strong id="pots">0</strong></span>
        </div>
      </div>
    </div>
    <div class="quickbar">
      <button id="btnToggleMinimap" class="slot" title="Mostra/Nascondi minimappa">🗺️</button>
      <button id="btnToggleQuest" class="slot" title="Mostra/Nascondi quest">📜</button>
    </div>
  </div>

  <!-- Sidebar destra -->
  <aside id="sidebar">
    <!-- Minimap panel -->
    <div id="minimapBox" class="side-panel">
      <div class="side-head">
        <span>Minimappa</span>
        <button id="btnHideMinimap" class="tiny">✖</button>
      </div>
      <canvas id="minimap" width="128" height="128" aria-label="Minimappa"></canvas>
    </div>

    <!-- Quest panel -->
    <div id="questPanel" class="side-panel">
      <div class="side-head">
        <span>Quest</span>
        <button id="btnHideQuest" class="tiny">✖</button>
      </div>
      <div class="quest">
        <div class="q-title">Raccogli <strong id="qtarget">30</strong> monete</div>
        <div class="q-progress"><div id="qfill"></div></div>
        <div class="q-meta">Prog: <span id="qcount">0</span>/<span id="qmax">30</span> • Ricompensa: +<span id="qreward">30</span> EXP</div>
      </div>
    </div>
  </aside>

  <main>
    <div id="wrap">
      <canvas id="game" width="640" height="640"></canvas>
      <p class="note">Tocca una casella per muoverti. Tappa uno slime adiacente per attaccarlo.</p>
    </div>
  </main>

  <!-- EXP bar -->
  <div id="expBar">
    <div id="xpfill"></div>
    <span id="xptext">EXP 0%</span>
  </div>

  <!-- Death -->
  <div id="deathScreen" class="overlay">
    <div class="panel">
      <h2 class="logo">Sei Morto</h2>
      <p class="subtitle">Hai perso il 10% delle monete. Vuoi respawnare?</p>
      <div class="menu">
        <button id="btnRespawn" class="btn primary">↻ Respawn</button>
        <button id="btnMenu" class="btn">☰ Torna al Menu</button>
      </div>
    </div>
  </div>

  <script src="game.js?v=12.1"></script>
</body>
</html>
